webpackJsonp([27],{"2its":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=r("+3IL"),a=r.n(i);(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};this.Calendar=function(){function r(t,r){this.calendar_activities_path=r,this.clickDay=e(this.clickDay,this),this.currentSelectedDate="",this.daySpace=1,this.daySize=15,this.daySizeWithSpace=this.daySize+2*this.daySpace,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.months=[],this.timestampsTmp=[];var i=0,a=new Date;a.setHours(0,0,0,0,0);var n=new Date(a);n.setFullYear(a.getFullYear()-1);for(var s=gl.utils.getDayDifference(n,a),c=0;c<=s;c+=1){var o=new Date(n);o.setDate(o.getDate()+c);var h=o.getDay(),u=t[o.format("yyyy-mm-dd")];(0===h&&0!==c||0===c)&&(this.timestampsTmp.push([]),i+=1);this.timestampsTmp[i-1].push({count:u||0,date:o,day:h})}this.colorKey=this.initColorKey(),this.color=this.initColor(),this.renderSvg(i),this.renderDays(),this.renderMonths(),this.renderDayTitles(),this.renderKey(),this.initTooltips()}return r.prototype.getExtraWidthPadding=function(t){var e=0;return this.timestampsTmp[t-1][0].date.getMonth()!=this.timestampsTmp[t-2][0].date.getMonth()&&(e=3),e},r.prototype.renderSvg=function(t){var e=(t+1)*this.daySizeWithSpace+this.getExtraWidthPadding(t);return this.svg=a.a.select(".js-contrib-calendar").append("svg").attr("width",e).attr("height",167).attr("class","contrib-calendar")},r.prototype.renderDays=function(){return this.svg.selectAll("g").data(this.timestampsTmp).enter().append("g").attr("transform",function(t){return function(e,r){return _.each(e,function(e,i){var a,n,s,c;if(0===i&&0===e.day){if(s=e.date.getMonth(),c=t.daySizeWithSpace*r+1+t.daySizeWithSpace,a=_.last(t.months),null!=a&&(n=a.x),null==a)return t.months.push({month:s,x:c});if(s!==a.month&&c-t.daySizeWithSpace!==n)return t.months.push({month:s,x:c})}}),"translate("+(t.daySizeWithSpace*r+1+t.daySizeWithSpace)+", 18)"}}(this)).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("x","0").attr("y",function(t){return function(e,r){return t.daySizeWithSpace*e.day}}(this)).attr("width",this.daySize).attr("height",this.daySize).attr("title",function(t){return function(t){var e,r,i;return r=new Date(t.date),e="No contributions",t.count>0&&(e=t.count+" contribution"+(t.count>1?"s":"")),i=r.format("mmm d, yyyy"),e+"<br />"+gl.utils.getDayName(r)+" "+i}}()).attr("class","user-contrib-cell js-tooltip").attr("fill",function(t){return function(e){return 0!==e.count?t.color(Math.min(e.count,40)):"#ededed"}}(this)).attr("data-container","body").on("click",this.clickDay)},r.prototype.renderDayTitles=function(){var t;return t=[{text:"M",y:29+1*this.daySizeWithSpace},{text:"W",y:29+3*this.daySizeWithSpace},{text:"F",y:29+5*this.daySizeWithSpace}],this.svg.append("g").selectAll("text").data(t).enter().append("text").attr("text-anchor","middle").attr("x",8).attr("y",function(t){return t.y}).text(function(t){return t.text}).attr("class","user-contrib-text")},r.prototype.renderMonths=function(){return this.svg.append("g").attr("direction","ltr").selectAll("text").data(this.months).enter().append("text").attr("x",function(t){return t.x}).attr("y",10).attr("class","user-contrib-text").text(function(t){return function(e){return t.monthNames[e.month]}}(this))},r.prototype.renderKey=function(){var t;return t=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)],this.svg.append("g").attr("transform","translate(18, "+(8*this.daySizeWithSpace+16)+")").selectAll("rect").data(t).enter().append("rect").attr("width",this.daySize).attr("height",this.daySize).attr("x",function(t){return function(e,r){return t.daySizeWithSpace*r}}(this)).attr("y",0).attr("fill",function(t){return t})},r.prototype.initColor=function(){var t;return t=["#ededed",this.colorKey(0),this.colorKey(1),this.colorKey(2),this.colorKey(3)],a.a.scale.threshold().domain([0,10,20,30]).range(t)},r.prototype.initColorKey=function(){return a.a.scale.linear().range(["#acd5f2","#254e77"]).domain([0,3])},r.prototype.clickDay=function(e){var r;return this.currentSelectedDate!==e.date?(this.currentSelectedDate=e.date,r=this.currentSelectedDate.getFullYear()+"-"+(this.currentSelectedDate.getMonth()+1)+"-"+this.currentSelectedDate.getDate(),t.ajax({url:this.calendar_activities_path,data:{date:r},cache:!1,dataType:"html",beforeSend:function(){return t(".user-calendar-activities").html('<div class="text-center"><i class="fa fa-spinner fa-spin user-calendar-activities-loading"></i></div>')},success:function(e){return t(".user-calendar-activities").html(e)}})):(this.currentSelectedDate="",t(".user-calendar-activities").html(""))},r.prototype.initTooltips=function(){return t(".js-contrib-calendar .js-tooltip").tooltip({html:!0})},r}()}).call(window)}).call(e,r("lwLq"))},yWD3:function(t,e,r){r("2its")}},["yWD3"]);
//# sourceMappingURL=users.73960a8f6da54f775227.bundle.js.map